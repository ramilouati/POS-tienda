{% extends 'base.html' %}

{% block pageContent %}

<div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
  <div class="mdc-card py-2">
    <div class="d-flex justify-content-between align-items-center">
      <h4 class="card-title mb-0">Détails {{ product.name }}</h4>
    </div>
  </div>
</div>
<div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
  <div class="mdc-card">
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
      <p><strong>Code:</strong> {{ product.code }}</p>
      <p><strong>Nom:</strong> {{ product.name }}</p>
      <p><strong>Description:</strong> {{ product.description }}</p>
      <p><strong>Coût:</strong> {{ product.cost }}</p>
      <p><strong>Prix:</strong> {{ product.price }}</p>
      <p><strong>Quantité:</strong> {{ product.quantity }}</p>
      <p><strong>Quantité historique:</strong> {{ cantidad_historica }}</p>
   <input type="hidden" name="code_bar" value="{{ product.code_bar }}"/>
      <td class="text-center">
        <a href="{% url 'inventory:product_list' %}" class="btn btn-success btn-sm" title="Lista de Productos">
          <i class="mdi mdi-view-list"></i>
        </a>
        
        <a href="{% url 'inventory:product_update' product.pk %}" class="btn btn-primary btn-sm" title="Editar">
          <i class="mdi mdi-pencil"></i>
        </a>
        <a href="{% url 'inventory:product_delete' product.pk %}" class="btn btn-danger btn-sm" title="Eliminar">
          <i class="mdi mdi-delete"></i>
        </a>
      </td>
    </div>
    <div class="col-md-6">
      <svg id="barcode"></svg>

    </div>
  </div>
</div>
</div>
</div>
{% endblock %}
{% block ScriptBlock %}

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const codeBarInput = document.querySelector('[name="code_bar"]');
    const barcodeValue = codeBarInput.value; // Get the initial value of the input field

    // Display the barcode if the input already has a value on page load
    if (barcodeValue) {
        JsBarcode("#barcode", barcodeValue); // Generate the barcode
    }

  });
</script>
{% endblock %}
